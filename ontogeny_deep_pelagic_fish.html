<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Ontogeny of deep pelagic fish</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="ontogeny_deep_pelagic_fish_files/libs/clipboard/clipboard.min.js"></script>
<script src="ontogeny_deep_pelagic_fish_files/libs/quarto-html/quarto.js"></script>
<script src="ontogeny_deep_pelagic_fish_files/libs/quarto-html/popper.min.js"></script>
<script src="ontogeny_deep_pelagic_fish_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="ontogeny_deep_pelagic_fish_files/libs/quarto-html/anchor.min.js"></script>
<link href="ontogeny_deep_pelagic_fish_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="ontogeny_deep_pelagic_fish_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="ontogeny_deep_pelagic_fish_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="ontogeny_deep_pelagic_fish_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="ontogeny_deep_pelagic_fish_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-full toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Sections</h2>
   
  <ul>
  <li><a href="#size-distribution-as-a-function-of-depth" id="toc-size-distribution-as-a-function-of-depth" class="nav-link active" data-scroll-target="#size-distribution-as-a-function-of-depth">1. Size distribution as a function of depth</a>
  <ul class="collapse">
  <li><a href="#density-plot-by-depth-layer---community-level" id="toc-density-plot-by-depth-layer---community-level" class="nav-link" data-scroll-target="#density-plot-by-depth-layer---community-level">Density plot by depth layer - community level</a>
  <ul class="collapse">
  <li><a href="#test-of-the-significance-of-the-size-depth-relationship---community-level" id="toc-test-of-the-significance-of-the-size-depth-relationship---community-level" class="nav-link" data-scroll-target="#test-of-the-significance-of-the-size-depth-relationship---community-level">Test of the significance of the size-depth relationship - community level</a></li>
  </ul></li>
  <li><a href="#density-plot-by-depth-layer---species-level" id="toc-density-plot-by-depth-layer---species-level" class="nav-link" data-scroll-target="#density-plot-by-depth-layer---species-level">Density plot by depth layer - species level</a></li>
  </ul></li>
  <li><a href="#linear-relationships" id="toc-linear-relationships" class="nav-link" data-scroll-target="#linear-relationships">Linear relationships</a></li>
  <li><a href="#delta15n-size-relationships" id="toc-delta15n-size-relationships" class="nav-link" data-scroll-target="#delta15n-size-relationships">2. <span class="math inline">\(\delta\)</span><sup>15</sup>N-size relationships</a>
  <ul class="collapse">
  <li><a href="#at-community-level" id="toc-at-community-level" class="nav-link" data-scroll-target="#at-community-level">At community level</a></li>
  <li><a href="#at-species-level" id="toc-at-species-level" class="nav-link" data-scroll-target="#at-species-level">At species level</a></li>
  </ul></li>
  <li><a href="#variation-partitionning" id="toc-variation-partitionning" class="nav-link" data-scroll-target="#variation-partitionning">4. Variation partitionning</a>
  <ul class="collapse">
  <li><a href="#at-community-level-1" id="toc-at-community-level-1" class="nav-link" data-scroll-target="#at-community-level-1">At community level</a></li>
  <li><a href="#lampanyctus-crocodilus" id="toc-lampanyctus-crocodilus" class="nav-link" data-scroll-target="#lampanyctus-crocodilus"><em>Lampanyctus crocodilus</em></a></li>
  <li><a href="#myctophum-punctatum" id="toc-myctophum-punctatum" class="nav-link" data-scroll-target="#myctophum-punctatum"><em>Myctophum punctatum</em></a></li>
  <li><a href="#melanostigma-atlanticum" id="toc-melanostigma-atlanticum" class="nav-link" data-scroll-target="#melanostigma-atlanticum"><em>Melanostigma atlanticum</em></a></li>
  <li><a href="#serrivomer-beanii" id="toc-serrivomer-beanii" class="nav-link" data-scroll-target="#serrivomer-beanii"><em>Serrivomer beanii</em></a></li>
  <li><a href="#argyropelecus-olfersii" id="toc-argyropelecus-olfersii" class="nav-link" data-scroll-target="#argyropelecus-olfersii"><em>Argyropelecus olfersii</em></a></li>
  <li><a href="#lampanyctus-macdonaldi" id="toc-lampanyctus-macdonaldi" class="nav-link" data-scroll-target="#lampanyctus-macdonaldi"><em>Lampanyctus macdonaldi</em></a></li>
  <li><a href="#searsia-koefoedi" id="toc-searsia-koefoedi" class="nav-link" data-scroll-target="#searsia-koefoedi"><em>Searsia koefoedi</em></a></li>
  <li><a href="#notoscopelus-kroyeri" id="toc-notoscopelus-kroyeri" class="nav-link" data-scroll-target="#notoscopelus-kroyeri"><em>Notoscopelus kroyeri</em></a></li>
  <li><a href="#xenodermichthys-copei" id="toc-xenodermichthys-copei" class="nav-link" data-scroll-target="#xenodermichthys-copei"><em>Xenodermichthys copei</em></a></li>
  <li><a href="#arctozenus-risso" id="toc-arctozenus-risso" class="nav-link" data-scroll-target="#arctozenus-risso"><em>Arctozenus risso</em></a></li>
  <li><a href="#variance-partitionning-summary" id="toc-variance-partitionning-summary" class="nav-link" data-scroll-target="#variance-partitionning-summary">Variance partitionning summary</a></li>
  </ul></li>
  <li><a href="#summary-table" id="toc-summary-table" class="nav-link" data-scroll-target="#summary-table">5. Summary table</a></li>
  <li><a href="#limits" id="toc-limits" class="nav-link" data-scroll-target="#limits">6. Limits</a>
  <ul class="collapse">
  <li><a href="#test-of-temporal-variability-on-delta15n-values" id="toc-test-of-temporal-variability-on-delta15n-values" class="nav-link" data-scroll-target="#test-of-temporal-variability-on-delta15n-values">Test of temporal variability on <span class="math inline">\(\delta\)</span><sup>15</sup>N values</a></li>
  <li><a href="#representativeness-of-the-sampling-of-individuals-for-delta15n-values" id="toc-representativeness-of-the-sampling-of-individuals-for-delta15n-values" class="nav-link" data-scroll-target="#representativeness-of-the-sampling-of-individuals-for-delta15n-values">Representativeness of the sampling of individuals for <span class="math inline">\(\delta\)</span><sup>15</sup>N values</a></li>
  <li><a href="#non-significant-size-depth-relationships-at-species-level" id="toc-non-significant-size-depth-relationships-at-species-level" class="nav-link" data-scroll-target="#non-significant-size-depth-relationships-at-species-level">Non-significant size-depth relationships at species level</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
</div>
<main class="content column-page-right" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Ontogeny of deep pelagic fish</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="size-distribution-as-a-function-of-depth" class="level1">
<h1>1. Size distribution as a function of depth</h1>
<section id="density-plot-by-depth-layer---community-level" class="level2">
<h2 class="anchored" data-anchor-id="density-plot-by-depth-layer---community-level">Density plot by depth layer - community level</h2>
<ul>
<li>Bigger fish at depth ?</li>
</ul>
<div class="cell">
<div class="cell-output-display">
<p><img src="ontogeny_deep_pelagic_fish_files/figure-html/size_depth_community-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<section id="test-of-the-significance-of-the-size-depth-relationship---community-level" class="level3">
<h3 class="anchored" data-anchor-id="test-of-the-significance-of-the-size-depth-relationship---community-level">Test of the significance of the size-depth relationship - community level</h3>
<div class="cell">
<div class="cell-output-display">
<p><img src="ontogeny_deep_pelagic_fish_files/figure-html/size_depth_community_lm-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="density-plot-by-depth-layer---species-level" class="level2">
<h2 class="anchored" data-anchor-id="density-plot-by-depth-layer---species-level">Density plot by depth layer - species level</h2>
<ul>
<li>Only significant relationships (non-significant relationships in supplementary materials)</li>
</ul>
<div class="cell">
<div class="cell-output-display">
<p><img src="ontogeny_deep_pelagic_fish_files/figure-html/size_depth_species-1.png" class="img-fluid" width="1248"></p>
</div>
</div>
</section>
</section>
<section id="linear-relationships" class="level1">
<h1>Linear relationships</h1>
<div class="cell">
<div class="cell-output-display">
<p><img src="ontogeny_deep_pelagic_fish_files/figure-html/size_depth_species_lm-1.png" class="img-fluid" width="960"></p>
</div>
</div>
</section>
<section id="delta15n-size-relationships" class="level1">
<h1>2. <span class="math inline">\(\delta\)</span><sup>15</sup>N-size relationships</h1>
<ul>
<li>Sampling of some individuals to obtain <span class="math inline">\(\delta\)</span><sup>15</sup>N values</li>
</ul>
<section id="at-community-level" class="level2">
<h2 class="anchored" data-anchor-id="at-community-level">At community level</h2>
<ul>
<li><p>Can we observe an increase in <span class="math inline">\(\delta\)</span><sup>15</sup>N values (proxy of trophic level) with increasing size of individuals in the deep pelagic fish community of the Bay of Biscay?</p></li>
<li><p>X axis (size) in log<sub>2</sub></p></li>
<li><p>Significant increase but very small slope</p></li>
</ul>
<div class="cell">
<div class="cell-output-display">
<p><img src="ontogeny_deep_pelagic_fish_files/figure-html/d15n_size_community-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="at-species-level" class="level2">
<h2 class="anchored" data-anchor-id="at-species-level">At species level</h2>
<ul>
<li><span class="math inline">\(\delta\)</span><sup>15</sup>N axis standardized</li>
<li><strong>A</strong>: significant relationships</li>
<li><strong>B</strong>: non-significant relationships</li>
<li><strong>Coefficient of variation</strong>: The dispersion of the <span class="math inline">\(\delta\)</span><sup>15</sup>N values is not the same between the species having shown non-significant <span class="math inline">\(\delta\)</span><sup>15</sup>N-size relationships: <em>X. copei</em> presents a strong dispersion of its values (CV = 6.57) contrary to the values of <em>N. kroyeri</em> which remain relatively stable with the size of its individuals (CV = 2.15)</li>
<li>Do these differences translate into differences in their feeding strategies?</li>
</ul>
<div class="cell">
<div class="cell-output-display">
<p><img src="ontogeny_deep_pelagic_fish_files/figure-html/d15_size_species-1.png" class="img-fluid" width="960"></p>
</div>
</div>
</section>
</section>
<section id="variation-partitionning" class="level1">
<h1>4. Variation partitionning</h1>
<ul>
<li>At the species level, is it the sampling depth or the size of the individuals that most influences the values in <span class="math inline">\(\delta\)</span><sup>15</sup>N?</li>
<li>To test the significance of the influence of each variable (depth and size) on ()<span class="math inline">\(^{15}\)</span>N values an ANOVA-type permutation test was performed for each model (anova.cca function)</li>
<li>Since the third fraction is not the result of an RDA, it cannot be tested for significance.</li>
</ul>
<section id="at-community-level-1" class="level2">
<h2 class="anchored" data-anchor-id="at-community-level-1">At community level</h2>
<div class="cell">
<div class="cell-output-display">
<p><img src="ontogeny_deep_pelagic_fish_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="576"></p>
</div>
</div>
<div class="cell">

</div>
<div class="cell">

</div>
</section>
<section id="lampanyctus-crocodilus" class="level2">
<h2 class="anchored" data-anchor-id="lampanyctus-crocodilus"><em>Lampanyctus crocodilus</em></h2>
<div class="cell">
<div class="cell-output-display">
<p><img src="ontogeny_deep_pelagic_fish_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid" width="576"></p>
</div>
</div>
<div class="cell">

</div>
<div class="cell">

</div>
</section>
<section id="myctophum-punctatum" class="level2">
<h2 class="anchored" data-anchor-id="myctophum-punctatum"><em>Myctophum punctatum</em></h2>
<div class="cell">
<div class="cell-output-display">
<p><img src="ontogeny_deep_pelagic_fish_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid" width="576"></p>
</div>
</div>
<div class="cell">

</div>
<div class="cell">

</div>
</section>
<section id="melanostigma-atlanticum" class="level2">
<h2 class="anchored" data-anchor-id="melanostigma-atlanticum"><em>Melanostigma atlanticum</em></h2>
<div class="cell">
<div class="cell-output-display">
<p><img src="ontogeny_deep_pelagic_fish_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid" width="576"></p>
</div>
</div>
<div class="cell">

</div>
<div class="cell">

</div>
</section>
<section id="serrivomer-beanii" class="level2">
<h2 class="anchored" data-anchor-id="serrivomer-beanii"><em>Serrivomer beanii</em></h2>
<div class="cell">
<div class="cell-output-display">
<p><img src="ontogeny_deep_pelagic_fish_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid" width="576"></p>
</div>
</div>
<div class="cell">

</div>
<div class="cell">

</div>
</section>
<section id="argyropelecus-olfersii" class="level2">
<h2 class="anchored" data-anchor-id="argyropelecus-olfersii"><em>Argyropelecus olfersii</em></h2>
<div class="cell">
<div class="cell-output-display">
<p><img src="ontogeny_deep_pelagic_fish_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid" width="576"></p>
</div>
</div>
<div class="cell">

</div>
<div class="cell">

</div>
</section>
<section id="lampanyctus-macdonaldi" class="level2">
<h2 class="anchored" data-anchor-id="lampanyctus-macdonaldi"><em>Lampanyctus macdonaldi</em></h2>
<div class="cell">
<div class="cell-output-display">
<p><img src="ontogeny_deep_pelagic_fish_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid" width="576"></p>
</div>
</div>
<div class="cell">

</div>
<div class="cell">

</div>
</section>
<section id="searsia-koefoedi" class="level2">
<h2 class="anchored" data-anchor-id="searsia-koefoedi"><em>Searsia koefoedi</em></h2>
<div class="cell">
<div class="cell-output-display">
<p><img src="ontogeny_deep_pelagic_fish_files/figure-html/unnamed-chunk-28-1.png" class="img-fluid" width="576"></p>
</div>
</div>
<div class="cell">

</div>
<div class="cell">

</div>
</section>
<section id="notoscopelus-kroyeri" class="level2">
<h2 class="anchored" data-anchor-id="notoscopelus-kroyeri"><em>Notoscopelus kroyeri</em></h2>
<div class="cell">
<div class="cell-output-display">
<p><img src="ontogeny_deep_pelagic_fish_files/figure-html/unnamed-chunk-31-1.png" class="img-fluid" width="576"></p>
</div>
</div>
<div class="cell">

</div>
<div class="cell">

</div>
</section>
<section id="xenodermichthys-copei" class="level2">
<h2 class="anchored" data-anchor-id="xenodermichthys-copei"><em>Xenodermichthys copei</em></h2>
<div class="cell">
<div class="cell-output-display">
<p><img src="ontogeny_deep_pelagic_fish_files/figure-html/unnamed-chunk-34-1.png" class="img-fluid" width="576"></p>
</div>
</div>
<div class="cell">

</div>
<div class="cell">

</div>
</section>
<section id="arctozenus-risso" class="level2">
<h2 class="anchored" data-anchor-id="arctozenus-risso"><em>Arctozenus risso</em></h2>
<div class="cell">
<div class="cell-output-display">
<p><img src="ontogeny_deep_pelagic_fish_files/figure-html/unnamed-chunk-37-1.png" class="img-fluid" width="576"></p>
</div>
</div>
<div class="cell">

</div>
<div class="cell">

</div>
</section>
<section id="variance-partitionning-summary" class="level2">
<h2 class="anchored" data-anchor-id="variance-partitionning-summary">Variance partitionning summary</h2>
<div class="cell">
<div class="cell-output-display">
<p><img src="ontogeny_deep_pelagic_fish_files/figure-html/var_part-1.png" class="img-fluid" width="1248"></p>
</div>
</div>
</section>
</section>
<section id="summary-table" class="level1">
<h1>5. Summary table</h1>
<p><strong>Testing significance:</strong></p>
<ul>
<li><span class="math inline">\(\delta\)</span><sup>15</sup>N - Size &amp; <span class="math inline">\(\delta\)</span><sup>15</sup>N - depth : use of the anova.cca() function to test the significance of each part separately (depth &amp; size) on the variability of <span class="math inline">\(\delta\)</span><sup>15</sup>N values</li>
<li>Depth - size : test with linear model lm (size~depth)</li>
<li><em>Stomias boa</em> &amp; <em>Aphanopus carbo</em> * depth range too small (&lt; 100m) so no use of variance partition models on these species, but linear models <span class="math inline">\(\delta\)</span><sup>15</sup>N - size significant</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="ontogeny_deep_pelagic_fish_files/figure-html/summary_table.jpg" class="img-fluid figure-img" style="width:70.0%"></p>
<p></p><figcaption class="figure-caption">Summary table</figcaption><p></p>
</figure>
</div>
</section>
<section id="limits" class="level1">
<h1>6. Limits</h1>
<section id="test-of-temporal-variability-on-delta15n-values" class="level2">
<h2 class="anchored" data-anchor-id="test-of-temporal-variability-on-delta15n-values">Test of temporal variability on <span class="math inline">\(\delta\)</span><sup>15</sup>N values</h2>
<ul>
<li><p>Difficult to test because it is necessary to eliminate the biases due to size and depth.</p></li>
<li><p>However, over 90% of the sampling has been completed between 2019 and 2021 (and almost 3/4 in 2021)</p></li>
<li><p>If major environmental changes had occurred that significantly altered the baseline over time, this would have been observed in all species in the same way, which does not appear to be the case here</p></li>
<li><p>Test with <em>Lampnyctus crocodilus</em>: In the bathypelagic layer and individuals between 10 and 12cm : non signifiant differences</p></li>
<li><p>we can see that the data from the different years merge, there does not seem to be a strong effect of the year of sampling on the <span class="math inline">\(\delta\)</span><sup>15</sup>N values</p></li>
<li><p>only night sampling</p></li>
</ul>
<div class="cell">
<div class="cell-output-display">
<p><img src="ontogeny_deep_pelagic_fish_files/figure-html/temporal_variability-1.png" class="img-fluid" width="1440"></p>
</div>
</div>
</section>
<section id="representativeness-of-the-sampling-of-individuals-for-delta15n-values" class="level2">
<h2 class="anchored" data-anchor-id="representativeness-of-the-sampling-of-individuals-for-delta15n-values">Representativeness of the sampling of individuals for <span class="math inline">\(\delta\)</span><sup>15</sup>N values</h2>
<ul>
<li>In supplementary material ?</li>
<li>no sampling of small <em>M. atlanticum</em> and big <em>L. macdonaldi</em></li>
<li>but overall good sampling coverage over the size ranges of the species</li>
</ul>
<div class="cell">
<div class="cell-output-display">
<p><img src="ontogeny_deep_pelagic_fish_files/figure-html/data_set-1.png" class="img-fluid" width="1440"></p>
</div>
</div>
</section>
<section id="non-significant-size-depth-relationships-at-species-level" class="level2">
<h2 class="anchored" data-anchor-id="non-significant-size-depth-relationships-at-species-level">Non-significant size-depth relationships at species level</h2>
<div class="cell">
<div class="cell-output-display">
<p><img src="ontogeny_deep_pelagic_fish_files/figure-html/size_depth_ns-1.png" class="img-fluid" width="1536"></p>
</div>
</div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "î§‹";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>